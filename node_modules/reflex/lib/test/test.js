"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _tape = require("tape");

var tape = _interopRequireWildcard(_tape);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.default = function (description, unit) {
  return tape.test(description, function (test) {
    var result = unit(test);
    if (result && result.then) {
      result.then(function (_) {
        return test.end();
      }, function (error) {
        return test.end(error || true);
      });
    } else {
      test.end();
    }
  });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZXN0L3Rlc3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7O0lBQVk7Ozs7a0JBRUcsVUFBQyxXQUFELEVBQWMsSUFBZDtTQUF1QixLQUFLLElBQUwsQ0FBVSxXQUFWLEVBQXVCLGdCQUFRO0FBQ25FLFFBQUksU0FBUyxLQUFLLElBQUwsQ0FBVCxDQUQrRDtBQUVuRSxRQUFJLFVBQVUsT0FBTyxJQUFQLEVBQWE7QUFDekIsYUFBTyxJQUFQLENBQVk7ZUFBSyxLQUFLLEdBQUw7T0FBTCxFQUFpQjtlQUFTLEtBQUssR0FBTCxDQUFTLFNBQVMsSUFBVDtPQUFsQixDQUE3QixDQUR5QjtLQUEzQixNQUVPO0FBQ0wsV0FBSyxHQUFMLEdBREs7S0FGUDtHQUYyRDtDQUE5QyIsImZpbGUiOiJ0ZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgdGFwZSBmcm9tIFwidGFwZVwiXG5cbmV4cG9ydCBkZWZhdWx0IChkZXNjcmlwdGlvbiwgdW5pdCkgPT4gdGFwZS50ZXN0KGRlc2NyaXB0aW9uLCB0ZXN0ID0+IHtcbiAgdmFyIHJlc3VsdCA9IHVuaXQodGVzdClcbiAgaWYgKHJlc3VsdCAmJiByZXN1bHQudGhlbikge1xuICAgIHJlc3VsdC50aGVuKF8gPT4gdGVzdC5lbmQoKSwgZXJyb3IgPT4gdGVzdC5lbmQoZXJyb3IgfHwgdHJ1ZSkpXG4gIH0gZWxzZSB7XG4gICAgdGVzdC5lbmQoKVxuICB9XG59KVxuIl19